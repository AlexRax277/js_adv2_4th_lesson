(()=>{"use strict";class t{constructor(t){this.domEl=t,this.onchecking=this.onchecking.bind(this)}static structure(){const t=document.createElement("div");t.classList="container";const e=document.createElement("h2");e.textContent="Проверьте свою карту",t.appendChild(e);const s=document.createElement("ul");s.classList="cardList",["am-exp","din-cl","disc","jcb","master","mir","visa"].forEach((t=>{const e=document.createElement("li");e.classList=`card ${t}`,s.appendChild(e)})),t.appendChild(s);const c=document.createElement("form");c.classList="form-group";const n=document.createElement("input");n.classList="form-control",n.type="text",n.placeholder="Номер карты",c.appendChild(n);const l=document.createElement("a");l.classList="btn",l.textContent="Нажмите для проверки",c.appendChild(l);const o=document.createElement("div");return o.classList="msg",o.textContent="some text",c.appendChild(o),t.appendChild(c),t}static validation(t){const e=t.replace(/ /g,"");let s=0,c=!1;for(let t=e.length-1;t>=0;t--){let n=e[t].charCodeAt()-"0".charCodeAt();!0===c&&(n*=2),s+=parseInt(n/10,10),s+=n%10,c=!c}return s%10==0}addingWidget(){this.domEl.appendChild(t.structure())}addingFrame(t){document.querySelectorAll(".card").forEach((t=>{t.classList.remove("frame")}));let e=null;/^4/.test(t)?e=this.domEl.querySelector(".visa"):/^55/.test(t)?e=this.domEl.querySelector(".master"):/^35/.test(t)?e=this.domEl.querySelector(".jcb"):/^6011/.test(t)?e=this.domEl.querySelector(".disc"):/^305/.test(t)?e=this.domEl.querySelector(".din-cl"):/^37/.test(t)?e=this.domEl.querySelector(".am-exp"):/^2/.test(t)&&(e=this.domEl.querySelector(".mir")),e.classList.toggle("frame")}onchecking(){const e=this.domEl.querySelector(".btn"),s=this.domEl.querySelector(".form-control"),c=this.domEl.querySelector(".msg");e.addEventListener("click",(()=>{t.validation(s.value)&&""!==s.value&&/[0-9]+/.test(s.value)?(c.textContent="карта действительна",c.classList.remove("invalid"),c.classList.toggle("valid"),this.addingFrame(s.value)):(c.textContent="карта недействительна, либо это вообще не карта",c.classList.remove("valid"),c.classList.toggle("invalid"))}))}}document.addEventListener("DOMContentLoaded",(()=>{const e=new t(document.body);e.addingWidget(),e.onchecking()}))})();